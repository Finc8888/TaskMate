!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var o,i,r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function d(t){try{s(o.next(t))}catch(t){r(t)}}function a(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(d,a)}s((o=o.apply(t,e||[])).next())}))},d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=d(n(1));$("#exampleModal").on("shown.bs.modal",(function(){$("#myInput").trigger("focus")}));const s=new a.default;null===(o=document.getElementById("btn-create-task"))||void 0===o||o.addEventListener("click",t=>r(void 0,void 0,void 0,(function*(){const e=document.forms[0];yield fetch("/create_task",{method:"post",body:new FormData(e)}),yield c(),$("#taskModal").modal("hide"),t.preventDefault()}))),null===(i=document.getElementById("btn-truncate-tasks"))||void 0===i||i.addEventListener("click",t=>r(void 0,void 0,void 0,(function*(){yield fetch("/truncate_tasks",{method:"post",body:""}),yield c(),t.preventDefault()})));const c=()=>r(void 0,void 0,void 0,(function*(){var t;s.taskList=yield s.getTasks("/get_all_tasks");let e=document.getElementsByClassName("task-list")[0];if(e){for(;e.firstChild;)e.removeChild(e.firstChild);for(let e of s.taskList){let n=`\n        <div class="card-group">\n            <div class="card text-white bg-secondary mb-3" style="max-width: 18rem;">\n                <div class="card-header">\n                    <div class="date">${e.created_on}</div>\n                        <button type="button" data-id=${e.id} id="btn-delete-task_${e.id}" class="btn btn-danger btn-delete-task">X</button>\n                    </div>\n                <div class="card-body">\n                    <h5 class="card-title">${e.name}</h5>\n                    <p class="card-text">${e.comment?e.comment:""}</p>\n                </div>\n            </div>\n        </div>\n        `,o=document.getElementsByClassName("task-list")[0];null==o||o.insertAdjacentHTML("beforeend",n),null===(t=document.getElementById("btn-delete-task_"+e.id))||void 0===t||t.addEventListener("click",t=>r(void 0,void 0,void 0,(function*(){const e=t.target.dataset.id;yield fetch("/remove_task/"+e,{method:"delete",body:""}),yield c(),t.preventDefault()})))}}}));c()},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function d(t){try{s(o.next(t))}catch(t){r(t)}}function a(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(d,a)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.taskList=[]}getTasks(t){return o(this,void 0,void 0,(function*(){let e=yield fetch(t);try{if(e.ok){let t=yield e.json();return console.log(t),Promise.resolve(t)}console.warn("Ошибка HTTP: "+e.status)}catch(t){console.error("Обнаружена ошибка : "+t)}}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL2luZGV4LnRzIiwid2VicGFjazovLy8uL3N0YXRpYy90YXNrLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiJCIsIm9uIiwidHJpZ2dlciIsInRhc2siLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJmb3JtIiwiZm9ybXMiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJGb3JtRGF0YSIsImJ1aWxkVGFza3MiLCJtb2RhbCIsInByZXZlbnREZWZhdWx0IiwidGFza0xpc3QiLCJnZXRUYXNrcyIsImxpc3RFbGVtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInRhc2tPYmoiLCJpdGVtIiwiY3JlYXRlZF9vbiIsImlkIiwiY29tbWVudCIsImluc2VydEFkamFjZW50SFRNTCIsInRhcmdldCIsImRhdGFzZXQiLCJ0aGlzIiwidXJsIiwicmVzcG9uc2UiLCJvayIsImpzb24iLCJjb25zb2xlIiwibG9nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ3YXJuIiwic3RhdHVzIiwiZXJyIiwiZXJyb3IiXSwibWFwcGluZ3MiOiJh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TUFJaUJELEVBQVFFLDJFQUNRRixFQUFRRywwQkFBMEJILEVBQVFHLDBLQUdyREgsRUFBUWhELHVEQUNWZ0QsRUFBUUksUUFBVUosRUFBUUksUUFBVSwrRUFLL0RSLEVBQWNmLFNBQVNnQix1QkFBdUIsYUFBYSxHQUMvREQsV0FBYVMsbUJBQW1CLFlBQVlKLEdBRVksUUFBeEQsRUFBQXBCLFNBQVNDLGVBQWUsbUJBQW1Ca0IsRUFBUUcsV0FBSyxTQUFFcEIsaUJBQWlCLFFBQWVDLEdBQVMsb0NBQy9GLE1BQU1tQixFQUFLbkIsRUFBRXNCLE9BQU9DLFFBQVFKLFNBQ3RCaEIsTUFBTSxnQkFBb0JnQixFQUFNLENBQUNmLE9BQU8sU0FBU0MsS0FBSyxXQUN0REUsSUFDTlAsRUFBRVMsMEJBVWRGLEssOFlDOURKLFVBdkJBLE1BRUksY0FDSWlCLEtBQUtkLFNBQVcsR0FHZixTQUFTZSxHLHlDQUNWLElBQUlDLFFBQWlCdkIsTUFBTXNCLEdBQzNCLElBQ0ksR0FBSUMsRUFBU0MsR0FBSSxDQUNiLElBQUlDLFFBQWFGLEVBQVNFLE9BRTFCLE9BREFDLFFBQVFDLElBQUlGLEdBQ0xHLFFBQVFDLFFBQVFKLEdBRXZCQyxRQUFRSSxLQUFLLGdCQUFrQlAsRUFBU1EsUUFHaEQsTUFBTUMsR0FDRk4sUUFBUU8sTUFBTSx1QkFBdUJEIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBUYXNrIGZyb20gJy4vdGFzayc7XG4kKCcjZXhhbXBsZU1vZGFsJykub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICQoJyNteUlucHV0JykudHJpZ2dlcignZm9jdXMnKVxuICB9KVxuY29uc3QgdGFzayA9IG5ldyBUYXNrO1xuY29uc3QgVXJsVGFza3MgPSAnL2dldF9hbGxfdGFza3MnO1xuY29uc3QgVXJsQ2xlYXJUYXNrcyA9ICcvdHJ1bmNhdGVfdGFza3MnO1xuY29uc3QgVXJsUmVtb3ZlVGFzayA9ICcvcmVtb3ZlX3Rhc2snXG5jb25zdCBVcmxDcmVhdGVUYXNrID0gJy9jcmVhdGVfdGFzaydcblxuYXN5bmMgZnVuY3Rpb24gZ2V0VGltZU5vdygpe1xuICAgIHNldEludGVydmFsKCgpPT57XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZTtcbiAgICAgICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgIGNvbnN0IG1pbiA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICBjb25zdCBzZWMgPSBkYXRlLmdldFNlY29uZHMoKTtcbiAgICAgICAgY29uc3QgdGltZSA9IGAke2hvdXJzfToke21pbn06JHtzZWN9YDtcbiAgICAgICAgY29uc29sZS5sb2codGltZSk7XG4gICAgICAgIHJldHVybiB0aW1lO1xuICAgICAgICB9LDEwMDApO1xufVxuXG4vKipcbiAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7Qt9C00LDQvdC40Y8g0L3QvtCy0L7QuSDQt9Cw0LTQsNGH0LhcbiAqL1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG4tY3JlYXRlLXRhc2tcIik/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGFzeW5jIChlKSA9PntcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZm9ybXNbMF07XG4gICAgYXdhaXQgZmV0Y2goVXJsQ3JlYXRlVGFzaywge21ldGhvZDoncG9zdCcsIGJvZHk6IG5ldyBGb3JtRGF0YShmb3JtKX0pO1xuICAgIGF3YWl0IGJ1aWxkVGFza3MoKTtcbiAgICAvL1RPRE8gdHlwZSBhbnlcbiAgICAoJCgnI3Rhc2tNb2RhbCcpIGFzIGFueSkubW9kYWwoJ2hpZGUnKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG59KVxuLyoqXG4gKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRg9C00LDQu9C10L3QuNC1INCy0YHQtdGFINGC0LXQutGD0YnQuNGFINC30LDQtNCw0YdcbiAqL1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi10cnVuY2F0ZS10YXNrcycpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsYXN5bmMgKGUpID0+e1xuICAgIGF3YWl0IGZldGNoKFVybENsZWFyVGFza3MsIHttZXRob2Q6J3Bvc3QnLGJvZHk6Jyd9KTtcbiAgICBhd2FpdCBidWlsZFRhc2tzKCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufSlcbi8qKlxuICog0J/QvtGB0YLRgNC+0LXQvdC40LUg0YHQv9C40YHQutCwINCy0YHQtdGFINGC0LXQutGD0YnQuNGFINC30LDQtNCw0YcsINGF0YDQsNC90Y/RidC40YXRgdGPINCyINCx0LDQt9C1XG4gKi9cbmNvbnN0IGJ1aWxkVGFza3MgPSBhc3luYyAoICkgPT4ge1xuICAgIHRhc2sudGFza0xpc3QgPSBhd2FpdCB0YXNrLmdldFRhc2tzKFVybFRhc2tzKTtcbiAgICAvLyDQvtGH0LjRgdGC0LrQsCDRgdC/0LjRgdC60LAg0LfQsNC00LDRhyDQvdCwINGB0YLRgNCw0L3QuNGG0LVcbiAgICBsZXQgbGlzdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0YXNrLWxpc3QnKVswXTtcbiAgICBpZihsaXN0RWxlbWVudCl7XG4gICAgICAgIHdoaWxlIChsaXN0RWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICBsaXN0RWxlbWVudC5yZW1vdmVDaGlsZChsaXN0RWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IobGV0IHRhc2tPYmogb2YgdGFzay50YXNrTGlzdCl7XG5cbiAgICAgICAgICAgIGxldCBpdGVtID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ncm91cFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQgdGV4dC13aGl0ZSBiZy1zZWNvbmRhcnkgbWItM1wiIHN0eWxlPVwibWF4LXdpZHRoOiAxOHJlbTtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGVcIj4ke3Rhc2tPYmouY3JlYXRlZF9vbn08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtaWQ9JHt0YXNrT2JqLmlkfSBpZD1cImJ0bi1kZWxldGUtdGFza18ke3Rhc2tPYmouaWR9XCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlciBidG4tZGVsZXRlLXRhc2tcIj5YPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwiY2FyZC10aXRsZVwiPiR7dGFza09iai5uYW1lfTwvaDU+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FyZC10ZXh0XCI+JHt0YXNrT2JqLmNvbW1lbnQgPyB0YXNrT2JqLmNvbW1lbnQgOiAnJ308L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgICAgICBsZXQgbGlzdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0YXNrLWxpc3QnKVswXTtcbiAgICAgICAgICAgIGxpc3RFbGVtZW50Py5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsaXRlbSk7XG4gICAgICAgICAgICAvLyDQvdCwINC60LDQttC00YPRjiDQutC90L7Qv9C60YMg0LLQtdGI0LDQtdC8INGB0LLQvtC5INC+0LHRgNCw0LHQvtGC0YfQuNC6INGD0LTQsNC70LXQvdC40Y8g0LfQsNC00LDRh9C4XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgYnRuLWRlbGV0ZS10YXNrXyR7dGFza09iai5pZH1gKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGFzeW5jIChlOmFueSkgPT57XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBlLnRhcmdldC5kYXRhc2V0LmlkO1xuICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKGAke1VybFJlbW92ZVRhc2t9LyR7aWR9YCwge21ldGhvZDonZGVsZXRlJyxib2R5OicnfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgYnVpbGRUYXNrcygpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4vKipcbiAqINCX0LDQv9GD0YHQuiDRgtC10LrRg9GJ0LXQs9C+INGE0YPQvdC60YbQuNC+0L3QsNC70LAg0L/RgNC40LvQvtC20LXQvdC40Y9cbiAqL1xuY29uc3QgcnVuID0gKCkgPT4ge1xuICAgIGJ1aWxkVGFza3MoKTtcblxuICAgIC8vIGdldFRpbWVOb3coKTtcblxufVxuXG5ydW4oKTsiLCJjbGFzcyBUYXNrIHtcbiAgICB0YXNrTGlzdDogYW55W107XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudGFza0xpc3QgPSBbXG4gICAgICAgIF1cbiAgICB9XG4gICBhc3luYyBnZXRUYXNrcyh1cmw6c3RyaW5nKXtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7ICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGpzb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoanNvbik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwi0J7RiNC40LHQutCwIEhUVFA6IFwiICsgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoKGVycil7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDQntCx0L3QsNGA0YPQttC10L3QsCDQvtGI0LjQsdC60LAgOiAke2Vycn1gKVxuICAgICAgICB9XG5cbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBUYXNrOyJdLCJzb3VyY2VSb290IjoiIn0=